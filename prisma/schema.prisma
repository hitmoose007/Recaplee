generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Competitor {
  created_at       DateTime?    @default(now()) @db.Timestamptz(6)
  current_position Int?         @db.SmallInt
  last_position    Int?         @db.SmallInt
  current_content  Json?
  title            String?
  domain           String?
  link             String?
  query_id         String?      @db.Uuid
  id               String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  changed_content  Json?
  is_custom        Boolean?     @default(false)
  content_changed  Int?         @db.SmallInt
  changes_detected Int?         @db.SmallInt
  Query            TargetQuery? @relation(fields: [query_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model TargetQuery {
  id                  String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  created_at          DateTime?    @default(now()) @db.Timestamptz(6)
  competitors_tracked Int?
  old_update          DateTime?    @default(now()) @db.Date
  query_name          String?
  google_domain       String?
  is_pc               Boolean?
  country             String?
  new_changes         Int?
  serp_chnages        Decimal?     @default(0) @db.Decimal
  changes_per_website Decimal?     @default(0) @db.Decimal
  recent_update       DateTime?    @default(now()) @db.Date
  Competitor          Competitor[]
}



