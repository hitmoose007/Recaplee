generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Competitor {
  created_at       DateTime? @default(now()) @db.Timestamptz(6)
  current_position BigInt?
  last_position    BigInt?
  current_content  Json?
  previous_content Json?
  title            String?
  domain           String?
  link             String?
  query_id         String?   @db.Uuid
  id               String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  Query            TargetQuery?    @relation(fields: [query_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model TargetQuery {
  id                  String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  created_at          DateTime?    @default(now()) @db.Timestamptz(6)
  competitors_tracked Int?
  last_update         DateTime?    @default(now()) @db.Date
  query_name          String?
  google_domain       String?
  is_pc               Boolean?
  country             String?
  new_changes         Int?
  Competitor          Competitor[]
}
